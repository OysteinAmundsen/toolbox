{/* Introduction.mdx */}
import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Grid/Introduction" />

# <img src="./grid_logo.png" alt="" style={{height: '1.2em', verticalAlign: 'middle', marginRight: '0.3em'}} /> @toolbox-web/grid

A **high-performance, framework-agnostic data grid** web component built with pure TypeScript. No runtime dependenciesâ€”just drop it into any project and start rendering data.

## Why Choose @toolbox-web/grid?

We built this grid because we needed something that works everywhere without framework lock-in or expensive licensing. Whether you're building a vanilla JavaScript prototype, a React dashboard, or an Angular enterprise application, you get the same powerful grid with a single codebase.

| Feature                    | Description                                                         |
| -------------------------- | ------------------------------------------------------------------- |
| ðŸš€ **Enterprise Performance** | Virtualized rendering handles 100k+ rows at 60fps                |
| ðŸ”§ **True Framework Agnostic** | Single codebase works in vanilla JS, React, Vue, Angular, Svelte |
| ðŸ“¦ **Lightweight & Self-Contained** | ~45KB gzipped with zero runtime dependencies           |
| ðŸ§© **Best-in-Class Plugin System** | 19+ hooks, dependency validation, type-safe config extension |
| âŒ¨ï¸ **Full Keyboard Support** | Arrow keys, Tab, Enter, Escape, Home/End, Page Up/Down            |
| ðŸŽ¨ **Themeable**           | CSS custom properties for complete visual customization             |
| ðŸ’¡ **Developer-Friendly Errors** | Actionable error messages with import hints and fix suggestions |
| ðŸ†“ **Free & Open Source**  | MIT licensedâ€”no enterprise tiers or feature gates                   |

> ðŸ’¡ **Built to Last**
>
> This grid is built entirely on **stable web standards**â€”Custom Elements, CSS Custom Properties, and standard DOM APIs. No framework abstractions, no compile-time magic, no dependencies that can break.
>
> What does that mean for you? **It will never stop working.** Even if development ceased tomorrow, your grid would continue to function in every browser, forever. No urgent security patches, no breaking changes from upstream dependencies, no "please upgrade to v47 or your app stops working." The web platform is the most stable foundation in softwareâ€”and that's what we built on.

## Quick Start

### Installation

```bash
npm install @toolbox-web/grid
# or use your preferred package manager
yarn add @toolbox-web/grid
pnpm add @toolbox-web/grid
bun add @toolbox-web/grid
```

### Basic Usage

The grid is a standard web componentâ€”use it just like any HTML element:

```html
<tbw-grid style="height: 300px;"></tbw-grid>

<script type="module">
  import '@toolbox-web/grid';

  const grid = document.querySelector('tbw-grid');

  grid.columns = [
    { field: 'id', header: 'ID', type: 'number', sortable: true },
    { field: 'name', header: 'Name', sortable: true },
    { field: 'email', header: 'Email' },
  ];

  grid.rows = [
    { id: 1, name: 'Alice', email: 'alice@example.com' },
    { id: 2, name: 'Bob', email: 'bob@example.com' },
    { id: 3, name: 'Carol', email: 'carol@example.com' },
  ];
</script>
```

That's itâ€”no build step required for basic usage. The grid auto-registers the `<tbw-grid>` custom element when you import it.

## Architecture Highlights

Under the hood, the grid employs patterns typically found in enterprise-grade solutions:

| Pattern | What It Does |
| ------- | ------------ |
| **Centralized Render Scheduler** | Batches all updates into a single `requestAnimationFrame` per frameâ€”no layout thrashing |
| **Phase-Based Execution** | Prioritizes work (config â†’ rows â†’ columns â†’ render) for predictable updates |
| **DOM Recycling** | Reuses row elements via a pool with epoch-based invalidationâ€”minimal GC pressure |
| **Template Cloning** | Pre-created templates cloned via `cloneNode(true)`â€”3-4x faster than `createElement` |
| **Event Delegation** | Single listener per event type on the containerâ€”scales to any dataset size |
| **Faux Scrollbar** | Separates scroll container from contentâ€”no reflow during scroll |

These aren't just implementation detailsâ€”they're why the grid stays smooth when others start to stutter.

## Features Overview

### Virtualization

The grid uses row virtualization by default, rendering only visible rows plus a configurable overscan buffer. Small datasets (under ~24 rows) bypass virtualization entirely for maximum simplicity. Throw a million rows at it and you'll still get smooth 60fps scrollingâ€”the DOM stays lean regardless of dataset size.

### Column Configuration

Columns support extensive configuration options. Here's a taste of what's available:

```typescript
const columns = [
  {
    field: 'name',           // Data field key (required)
    header: 'Full Name',     // Display header
    type: 'string',          // 'string' | 'number' | 'boolean' | 'date' | 'select'
    sortable: true,          // Enable sorting
    resizable: true,         // Enable column resize
    editable: true,          // Enable inline editing (requires EditingPlugin)
    width: 200,              // Initial width in pixels
    minWidth: 100,           // Minimum width when resizing
    format: (val) => val.toUpperCase(),  // Custom formatter
  },
];
```

Check out the [API Reference](../?path=/docs/grid-api--docs) for the complete list of column options.

### Sorting

Click column headers to sort. The grid supports:

- **Single-column sorting** (default) â€” click a header to sort, click again to reverse
- **Multi-column sorting** â€” hold Shift and click multiple headers, or use the MultiSort plugin
- **Custom sort comparators** â€” define your own comparison logic per column

### Inline Editing

Enable editing with the `EditingPlugin` and set `editable: true` on columns:

```typescript
import { EditingPlugin } from '@toolbox-web/grid/plugins/editing';

grid.gridConfig = {
  columns: [
    { field: 'name', editable: true },
    // ...
  ],
  plugins: [new EditingPlugin({ editOn: 'dblclick' })], // or 'click'
};
```

The grid provides:

- **Click** or **double-click** to edit (configurable via `EditingPlugin({ editOn })`)}
- Built-in editors for text, number, boolean (checkbox), date, and select
- **Enter** to confirm, **Escape** to cancel
- **Tab/Shift+Tab** navigation between editable cells
- Change tracking with commit/reset lifecycle

> **Note:** Editing is opt-in via the `EditingPlugin`. Using `editable: true` without the plugin will throw a helpful error with import instructions.

### Events

The grid emits standard DOM `CustomEvent`s that you can listen to:

| Event           | Description                         |
| --------------- | ----------------------------------- |
| `cell-commit`   | Cell value was edited and committed |
| `row-commit`    | Bulk row edit session completed     |
| `sort-change`   | Sort state changed                  |
| `column-resize` | Column was resized                  |
| `activate-cell` | Cell received focus/activation      |

```typescript
grid.addEventListener('cell-commit', (e) => {
  const { row, field, value, oldValue } = e.detail;
  console.log(`${field} changed from "${oldValue}" to "${value}"`);
});
```

## Plugin Architecture

The core grid is intentionally minimal (~45KB gzipped). Advanced features are delivered through plugins that you can import as neededâ€”pay only for what you use:

- **SelectionPlugin** â€” Cell, row, or range selection with Shift/Ctrl modifiers
- **FilteringPlugin** â€” Column header filters with custom filter panels
- **GroupingRowsPlugin** â€” Hierarchical row grouping with footer aggregations
- **TreePlugin** â€” Expandable tree data with lazy loading support
- **MasterDetailPlugin** â€” Expandable detail rows with custom content
- **PinnedColumnsPlugin** â€” Sticky columns on left/right edges
- **ExportPlugin** â€” Export to CSV, Excel, or JSON
- **ClipboardPlugin** â€” Copy/paste with Excel-compatible formatting
- **UndoRedoPlugin** â€” Ctrl+Z/Ctrl+Y for edit history
- **ContextMenuPlugin** â€” Right-click menus with custom actions
- ...and many more

### Why the Plugin System Stands Out

- **19+ extension hooks** â€” From data transforms to cell rendering to keyboard handling
- **Dependency validation** â€” Plugins declare dependencies; missing ones throw helpful errors
- **Type-safe config extension** â€” Plugins can add properties to `ColumnConfig` via module augmentation
- **Auto-cleanup** â€” Plugins receive an `AbortSignal` for automatic listener cleanup on detach
- **Third-party friendly** â€” Build and distribute your own plugins with full type support

Plugins are tree-shakeableâ€”only what you import ends up in your bundle.

```typescript
import { SelectionPlugin } from '@toolbox-web/grid/plugins/selection';
import { FilteringPlugin } from '@toolbox-web/grid/plugins/filtering';

grid.gridConfig = {
  columns: [...],
  plugins: [
    new SelectionPlugin({ mode: 'row' }),
    new FilteringPlugin({ debounceMs: 300 }),
  ],
};
```

## Next Steps

Ready to dive in? Here's where to go next:

- **[Getting Started](../?path=/docs/grid-getting-started--docs)** â€” Detailed setup for all frameworks
- **[Demos](../?path=/docs/grid-demos--docs)** â€” See all features in action
- **[Core Configuration](../?path=/docs/grid-core--docs)** â€” Full configuration reference
- **[Plugins](../?path=/docs/grid-plugins-overview--docs)** â€” Extend with selection, filtering, and more
- **[Theming](../?path=/docs/grid-theming--docs)** â€” Customize the visual appearance
- **[API Reference](../?path=/docs/grid-dev-api-reference--docs)** â€” Complete property/method/event reference
