import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import { Tabs, Tab } from '../../../../docs/components/Tabs';
import * as PinnedColumnsStories from './pinned-columns.stories';

<Meta of={PinnedColumnsStories} />

# Pinned Columns Plugin

The Pinned Columns plugin freezes columns to the left or right edge of the gridâ€”essential for keeping key identifiers or action buttons visible while scrolling through wide datasets. Just set `pinned: 'left'` or `pinned: 'right'` on your column definitions and the plugin handles the rest.

## Installation

```ts
import { PinnedColumnsPlugin } from '@toolbox-web/grid/plugins/pinned-columns';
```

## Basic Usage

Pin important columns like ID on the left and action buttons on the right. The pinned columns stay fixed while the middle content scrolls horizontally.

<Tabs>
  <Tab label="Vanilla JS">
```ts
const grid = document.querySelector('tbw-grid');
grid.gridConfig = {
  columns: [
    { field: 'id', header: 'ID', pinned: 'left', width: 80 },
    { field: 'name', header: 'Name' },
    { field: 'email', header: 'Email' },
    { field: 'department', header: 'Department' },
    { field: 'salary', header: 'Salary', type: 'currency' },
    { field: 'actions', header: 'Actions', pinned: 'right', width: 120 },
  ],
  plugins: [new PinnedColumnsPlugin()],
};
```
  </Tab>
  <Tab label="React">
```tsx
import { useRef, useEffect } from 'react';
import '@toolbox-web/grid';
import { PinnedColumnsPlugin } from '@toolbox-web/grid/plugins/pinned-columns';

function EmployeeGrid({ employees }) {
  const gridRef = useRef(null);

  useEffect(() => {
    if (gridRef.current) {
      gridRef.current.gridConfig = {
        columns: [
          { field: 'id', header: 'ID', pinned: 'left', width: 80 },
          { field: 'name', header: 'Name' },
          { field: 'email', header: 'Email' },
          { field: 'department', header: 'Department' },
          { field: 'salary', header: 'Salary', type: 'currency' },
          { field: 'actions', header: 'Actions', pinned: 'right', width: 120 },
        ],
        plugins: [new PinnedColumnsPlugin()],
      };
      gridRef.current.rows = employees;
    }
  }, [employees]);

  return <tbw-grid ref={gridRef} />;
}
```
  </Tab>
  <Tab label="Vue">
```vue
<template>
  <tbw-grid ref="gridRef" />
</template>

<script setup>
import { ref, onMounted } from 'vue';
import '@toolbox-web/grid';
import { PinnedColumnsPlugin } from '@toolbox-web/grid/plugins/pinned-columns';

const props = defineProps(['employees']);
const gridRef = ref(null);

onMounted(() => {
  gridRef.value.gridConfig = {
    columns: [
      { field: 'id', header: 'ID', pinned: 'left', width: 80 },
      { field: 'name', header: 'Name' },
      { field: 'email', header: 'Email' },
      { field: 'department', header: 'Department' },
      { field: 'salary', header: 'Salary', type: 'currency' },
      { field: 'actions', header: 'Actions', pinned: 'right', width: 120 },
    ],
    plugins: [new PinnedColumnsPlugin()],
  };
  gridRef.value.rows = props.employees;
});
</script>
```
  </Tab>
  <Tab label="Angular">
```typescript
import { Component, ElementRef, ViewChild, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';
import '@toolbox-web/grid';
import { PinnedColumnsPlugin } from '@toolbox-web/grid/plugins/pinned-columns';

@Component({
  standalone: true,
  schemas: [CUSTOM_ELEMENTS_SCHEMA],
  template: `<tbw-grid #grid />`
})
export class EmployeeGridComponent {
  @ViewChild('grid') gridRef!: ElementRef;

  ngAfterViewInit() {
    this.gridRef.nativeElement.gridConfig = {
      columns: [
        { field: 'id', header: 'ID', pinned: 'left', width: 80 },
        { field: 'name', header: 'Name' },
        { field: 'email', header: 'Email' },
        { field: 'department', header: 'Department' },
        { field: 'salary', header: 'Salary', type: 'currency' },
        { field: 'actions', header: 'Actions', pinned: 'right', width: 120 },
      ],
      plugins: [new PinnedColumnsPlugin()],
    };
  }
}
```
  </Tab>
</Tabs>

## Demos

### Default (Both Sides)

<Canvas of={PinnedColumnsStories.Default} withToolbar />
<Controls of={PinnedColumnsStories.Default} />

### Left Pinned Only

<Canvas of={PinnedColumnsStories.LeftPinnedOnly} withToolbar />

### Right Pinned Only

<Canvas of={PinnedColumnsStories.RightPinnedOnly} withToolbar />

## Configuration Options

The plugin has no configuration options. It is activated when columns have `sticky: 'left'` or `sticky: 'right'` set.

## Programmatic API

```ts
const plugin = grid.getPlugin(PinnedColumnsPlugin);

plugin.pinColumn('email', 'left');
plugin.unpinColumn('email');
const leftPinned = plugin.getPinnedColumns('left');
```
